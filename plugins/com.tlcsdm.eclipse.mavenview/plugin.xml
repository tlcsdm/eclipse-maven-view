<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="com.tlcsdm.eclipse.mavenview.internal.preferences.PreferenceInitializer">
      </initializer>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.runMavenPhases"
            name="%command.runMavenPhases">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.refresh"
            name="%command.refresh">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.changeDisplayedProjects"
            name="%command.changeDisplayedProjects">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.expandAll"
            name="%command.expandAll">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.collapseAll"
            name="%command.collapseAll">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.skipTests"
            name="%command.skipTests">
          <state
                class="org.eclipse.ui.handlers.RegistryToggleState:false"
                id="org.eclipse.ui.commands.toggleState" />
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.settings"
            name="%command.settings">
      </command>
      <command
            id="com.tlcsdm.eclipse.mavenview.commands.mavenSettings"
            name="%command.mavenSettings">
      </command>
   </extension>
   
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.runMavenPhases"
            icon="icons/run.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.refresh"
            icon="icons/refresh.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.changeDisplayedProjects"
            icon="icons/change-displayed-project.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.expandAll"
            icon="icons/expandall.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.collapseAll"
            icon="icons/collapseall.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.skipTests"
            icon="icons/skip.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.settings"
            icon="icons/settings.png">
      </image>
      <image
            commandId="com.tlcsdm.eclipse.mavenview.commands.mavenSettings"
            icon="icons/maven.png">
      </image>
   </extension>
   
   <extension
      point="org.eclipse.core.runtime.adapters">
      <factory
         adaptableType="org.eclipse.jface.viewers.IStructuredSelection"
         class="com.tlcsdm.eclipse.mavenview.internal.tree.MavenViewAdapterFactory">
        <adapter type="com.tlcsdm.eclipse.mavenview.internal.tree.PhaseNode"/>
        <adapter type="com.tlcsdm.eclipse.mavenview.internal.tree.LaunchConfigNode"/>
      </factory>
   </extension>
   
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.RunMavenPhasesHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.runMavenPhases">
            <enabledWhen>
                <iterate ifEmpty="false">
                    <or>
                        <instanceof value="com.tlcsdm.eclipse.mavenview.internal.tree.PhaseNode"/>
                        <instanceof value="com.tlcsdm.eclipse.mavenview.internal.tree.LaunchConfigNode"/>
                    </or>
                </iterate>
            </enabledWhen>
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.RefreshHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.refresh">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.ChangeDisplayedProjectsHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.changeDisplayedProjects">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.ExpandAllHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.expandAll">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.CollapseAllHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.collapseAll">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.SkipTestsHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.skipTests">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.SettingsHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.settings">
      </handler>
      <handler
            class="com.tlcsdm.eclipse.mavenview.internal.handler.OpenMavenSettingsHandler"
            commandId="com.tlcsdm.eclipse.mavenview.commands.mavenSettings">
      </handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:com.tlcsdm.eclipse.mavenview.MavenView">
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.refresh"
               id="refresh" />
         <separator
               name="com.tlcsdm.eclipse.mavenview.separator1"
               visible="true">
         </separator>
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.runMavenPhases"
               id="runMavenPhases" />
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.skipTests"
               id="skipTests"
               style="toggle"/>
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.expandAll"
               id="expandAll" />
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.collapseAll"
               id="collapseAll" />
         <separator
               name="com.tlcsdm.eclipse.mavenview.separator2"
               visible="true">
         </separator>
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.changeDisplayedProjects"
               id="changeDisplayedProjects" />
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.settings"
               id="settings" />
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:com.tlcsdm.eclipse.mavenview.MavenView">
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.runMavenPhases"
               id="runMavenPhases">
         </command>
         <separator
               name="com.tlcsdm.eclipse.mavenview.separator.popup1"
               visible="true">
         </separator>
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.refresh"
               id="refresh">
         </command>
         <separator
               name="com.tlcsdm.eclipse.mavenview.separator.popup2"
               visible="true">
         </separator>
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.changeDisplayedProjects"
               id="changeDisplayedProjects" />
         <command
               commandId="com.tlcsdm.eclipse.mavenview.commands.mavenSettings"
               id="mavenSettings" >
            <visibleWhen>
                <iterate ifEmpty="false">
                        <instanceof value="com.tlcsdm.eclipse.mavenview.internal.tree.LaunchConfigNode"/>
                </iterate>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="org.eclipse.jdt.ui.JavaPerspective">
         <view
               id="com.tlcsdm.eclipse.mavenview.MavenView"
               relationship="stack"
               relative="org.eclipse.ui.views.ProblemView">
         </view>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.m2e.core.preferences.Maven2PreferencePage"
            class="com.tlcsdm.eclipse.mavenview.internal.preferences.MavenViewPreferencePage"
            id="com.tlcsdm.eclipse.mavenview.MavenViewPreferencePage"
            name="%preferencePage.mavenView">
      </page>
   </extension>
   
   <extension
         point="org.eclipse.ui.views">
      <view
            class="com.tlcsdm.eclipse.mavenview.MavenView"
            icon="icons/maven.png"
            id="com.tlcsdm.eclipse.mavenview.MavenView"
            category="org.eclipse.m2e.core.views.repositories"
            inject="true"
            name="%view.maven">
      </view>
   </extension>
   
   <extension point="org.eclipse.debug.ui.consoleLineTrackers">
      <consoleLineTracker id="org.eclipse.m2e.console.MavenConsoleLineTracker"
            class="com.tlcsdm.eclipse.mavenview.internal.MavenConsoleLineTracker"
            processType="java"/>
   </extension>
   
</plugin>
